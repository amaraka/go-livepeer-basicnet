machine:
  environment:
    GOROOT: /usr/local/go

dependencies:
  cache_directories:
    - "$HOME/.go_workspace/"
  override:
    - go get -u github.com/whyrusleeping/gx
    - go get -u github.com/whyrusleeping/gx-go
    - go get github.com/multiformats/go-multicodec
    - go get github.com/jbenet/go-msgio
#    - cd "$HOME/.go_workspace/src/github.com"
#    - mkdir livepeer
#    - cd livepeer
#    - git clone git@github.com:livepeer/go-livepeer-basicnet.git
    - cd $HOME/go-livepeer-basicnet
    - gx install
    # - rm -rf /home/ubuntu/go-livepeer-basicnet
    # - go get ./...
    - go get github.com/livepeer/go-livepeer-basicnet
    - mv $HOME/.go_workspace/src/github.com/livepeer/go-livepeer/vendor/github.com/golang/glog $HOME/.go_workspace/src/github.com/livepeer/go-livepeer/vendor/github.com/golang/glog_backup

test:
  override:
    - cd "$HOME/go-livepeer-basicnet"
    - go test