machine:
  environment:
    GOROOT: /usr/local/go

checkout:
  override:
    - go get -u github.com/whyrusleeping/gx
    - go get -u github.com/whyrusleeping/gx-go
    - cd "$HOME/.go_workspace/src/github.com"
    - go get github.com/multiformats/go-multicodec
    - go get github.com/jbenet/go-msgio
    - mkdir livepeer
    - cd livepeer
    - git clone git@github.com:livepeer/go-livepeer-basicnet.git
    - cd go-livepeer-basicnet
    - gx install
    - go get ./...
    - mv ../go-livepeer/vendor/github.com/golang/glog ../go-livepeer/vendor/github.com/golang/glog_backup

dependencies:
  cache_directories:
    - "$HOME/.go_workspace/"
  # override:

test:
  override:
    - cd "$HOME/.go_workplace/src/github.com/livepeer/go-livepeer-basicnet"
    - go test