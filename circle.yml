machine:
  environment:
    GOROOT: /usr/local/go

dependencies:
  cache_directories:
    - "$HOME/.go_workspace/"
  override:
    - go get -u github.com/whyrusleeping/gx
    - go get -u github.com/whyrusleeping/gx-go
    # - go get github.com/multiformats/go-multicodec
    # - go get github.com/jbenet/go-msgio
    - gx-go get github.com/livepeer/go-livepeer-basicnet
    - cd $HOME/.go_workspace/src/github.com/livepeer/go-livepeer-basicnet && gx install
    # - cd $HOME/.go_workspace/src/github.com/livepeer/go-livepeer/ && git pull && rm -rf vendor/github.com && go get ./...

test:
  override:
    - cd "$HOME/.go_workspace/src/github.com/livepeer/go-livepeer-basicnet" && git fetch && git checkout $CIRCLE_BRANCH && git pull && gx-go get github.com/livepeer/go-livepeer-basicnet && go test